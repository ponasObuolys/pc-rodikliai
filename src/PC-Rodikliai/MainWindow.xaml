<Window x:Class="PC_Rodikliai.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PC_Rodikliai"
        xmlns:clock="clr-namespace:PC_Rodikliai.Components.Clock"
        xmlns:metrics="clr-namespace:PC_Rodikliai.Components.Metrics"
        xmlns:graphs="clr-namespace:PC_Rodikliai.Components.Graphs"
        xmlns:tb="http://www.hardcodet.net/taskbar"
        mc:Ignorable="d"
        Title="PC Rodikliai" 
        Height="800" 
        Width="400"
        Icon="pack://application:,,,/Resources/icon.ico"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="False"
        ResizeMode="CanResize">
    
    <Window.Resources>
        <Storyboard x:Key="ShowSidebar">
            <DoubleAnimation 
                Storyboard.TargetProperty="Opacity"
                From="0.0" To="1.0" Duration="0:0:0.2"/>
        </Storyboard>
        <Storyboard x:Key="HideSidebar">
            <DoubleAnimation 
                Storyboard.TargetProperty="Opacity"
                From="1.0" To="0.0" Duration="0:0:0.2"/>
        </Storyboard>
    </Window.Resources>

    <Grid>
        <!-- Pagrindinis turinys -->
        <Border Background="{StaticResource BackgroundBrush}"
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="1"
                CornerRadius="10"
                Margin="5">
            <Border.Effect>
                <DropShadowEffect ShadowDepth="0" 
                                BlurRadius="10" 
                                Opacity="0.5"/>
            </Border.Effect>

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Viršutinė juosta su laikrodžiu ir valdymu -->
                <Grid Grid.Row="0" Height="40">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Laikrodis -->
                    <clock:ClockControl Grid.Column="0" 
                                      Margin="10,0,0,0"/>

                    <!-- Valdymo mygtukai -->
                    <StackPanel Grid.Column="1" 
                              Orientation="Horizontal"
                              Margin="0,0,10,0">
                        <Button Style="{StaticResource WindowControlButton}"
                                Click="OnSettingsClick">
                            <TextBlock Text="⚙" FontSize="16"/>
                        </Button>
                        <Button Style="{StaticResource WindowControlButton}"
                                Click="OnMinimizeClick">
                            <TextBlock Text="—" FontSize="16"/>
                        </Button>
                        <Button Style="{StaticResource WindowControlButton}"
                                Click="OnCloseClick">
                            <TextBlock Text="×" FontSize="16"/>
                        </Button>
                    </StackPanel>
                </Grid>

                <!-- Metrikos -->
                <Grid Grid.Row="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <graphs:CpuUsageChart x:Name="CpuChart" Grid.Row="0"
                                        Height="150" Margin="10"/>

                    <graphs:RamUsageChart x:Name="RamChart" Grid.Row="1"
                                        Height="150" Margin="10"/>

                    <graphs:NetworkSpeedChart x:Name="NetworkChart" Grid.Row="2"
                                            Height="150" Margin="10"/>

                    <graphs:DiskUsageChart x:Name="DiskChart" Grid.Row="3"
                                        Height="150" Margin="10"/>
                </Grid>
            </Grid>
        </Border>

        <!-- Taskbar ikona -->
        <tb:TaskbarIcon x:Name="NotifyIcon"
                       IconSource="pack://application:,,,/Resources/icon.ico"
                       ToolTipText="PC Rodikliai">
            <tb:TaskbarIcon.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Rodyti" Click="OnShowClick"/>
                    <MenuItem Header="Nustatymai" Click="OnSettingsClick"/>
                    <Separator/>
                    <MenuItem Header="Uždaryti" Click="OnCloseClick"/>
                </ContextMenu>
            </tb:TaskbarIcon.ContextMenu>
        </tb:TaskbarIcon>
    </Grid>
</Window> 